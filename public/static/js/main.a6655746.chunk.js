(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),l=a.n(s),o=a(11),c=a(12),i=a(14),m=a(13),u=a(17),d=a(7),p=a(65),h=a(117),g=a(134),f=a(118),E=a(119),b=a(120),v=a(121),y=a(122),k=a(123),O=a(124),C=a(125),S=function(){return setInterval((function(){}),3e3),r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),r.a.createElement("p",null,"Loading . . ."))},N="http://localhost:3001/",w=a(10),j=a(61),M=a(64),F=a(113),L=a(114),I=a(115),x=a(116),D=[{src:"/assets/images/Cats_bite_funny_cameras_nikon_kittens_photo_camera_biting_1920x1080.jpg",altText:"Slide 1",caption:"Slide 1"},{src:"/assets/images/Waterfalls_USA_Crag_Trees_Hocking_Hills_State_Park_Ohio_Nature_10929x5553.jpg",altText:"Slide 2",caption:"Slide 2"},{src:"/assets/images/weapons_guns_pistol_black_white_photography_barrel_hole_circle_shape_metal_steel_men_male_boy_people_pov_face_eyes_mood_situation_emotion_angry_violence_1920x1200.jpg",altText:"Slide 3",caption:"Slide 3"}],A=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activeIndex:0},n.next=n.next.bind(Object(d.a)(n)),n.previous=n.previous.bind(Object(d.a)(n)),n.goToIndex=n.goToIndex.bind(Object(d.a)(n)),n.onExiting=n.onExiting.bind(Object(d.a)(n)),n.onExited=n.onExited.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"onExiting",value:function(){this.animating=!0}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===D.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?D.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"render",value:function(){var e=this,t=this.state.activeIndex,a=D.map((function(t){return r.a.createElement(M.a,{onExiting:e.onExiting,onExited:e.onExited,key:t.src},r.a.createElement("img",{class:"fit",style:{objectFit:"cover"},src:t.src,alt:t.altText}),r.a.createElement(F.a,{captionText:t.caption,captionHeader:t.caption}))}));return r.a.createElement("div",{class:"center"},r.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"}),r.a.createElement(L.a,{activeIndex:t,next:this.next,previous:this.previous},r.a.createElement(I.a,{items:D,activeIndex:t,onClickHandler:this.goToIndex}),a,r.a.createElement(x.a,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),r.a.createElement(x.a,{direction:"next",directionText:"Next",onClickHandler:this.next})))}}]),a}(r.a.Component),R=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isNavOpen:!1,isModalOpen:!1,isModalOpenStaff:!1,firstname:"",lastname:"",reading:null,city:"",state:"",district:"",address:"",doi:"",id:"",phone:"",id2:"",id3:"",charge:null,repos:[],key:""},n.toggleModal=n.toggleModal.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.getLocation=n.getLocation.bind(Object(d.a)(n)),n.stateHandel=n.stateHandel.bind(Object(d.a)(n)),n.getId=n.getId.bind(Object(d.a)(n)),n.toggleModalStaff=n.toggleModalStaff.bind(Object(d.a)(n)),n.handleSubmitStaff=n.handleSubmitStaff.bind(Object(d.a)(n)),n.handleCharge=n.handleCharge.bind(Object(d.a)(n)),n.handleFeedback=n.handleFeedback.bind(Object(d.a)(n)),n.searchKey=n.searchKey.bind(Object(d.a)(n)),n.getItemsAsync=n.getItemsAsync.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"handleFeedback",value:function(){this.props.fetchFeedbacks()}},{key:"handleCharge",value:function(){var e={charge:this.state.charge},t="Bearer "+localStorage.getItem("token");console.log("fetch"),fetch(N+"values/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e),credentials:"same-origin"}).then((function(e){if(e.ok)return console.log("success"),e;console.log("err1");var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw console.log("Err",e),e})).then((function(e){return e.json()})).then((function(e){e.status&&alert("Charge Value Changed")})).catch((function(e){return e}))}},{key:"stateHandel",value:function(e,t,a,n){this.setState({city:e,district:t,state:a,address:n})}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"toggleModalStaff",value:function(){this.setState({isModalOpenStaff:!this.state.isModalOpenStaff})}},{key:"searchKey",value:function(e){this.setState({key:e.split("/")[1]})}},{key:"handleSubmitStaff",value:function(){this.toggleModalStaff();var e={firstname:this.firstname.value,lastname:this.lastname.value,username:this.username.value,password:this.password.value},t="Bearer "+localStorage.getItem("token");console.log("fetch"),fetch(N+"users/signupStaff",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e),credentials:"same-origin"}).then((function(e){if(console.log("res staff",e),e.ok)return console.log("success"),e;console.log("err1");var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw console.log("Err",e),e})).then((function(e){return e.json()})).then((function(e){e.success&&alert(e.status)})).catch((function(e){alert("Failed to create Staff: ",e)}))}},{key:"getId",value:function(){var e=this;String.prototype.lpad=function(e,t){for(var a=this;a.length<t;)a=e+a;return a};var t=1;fetch(N+"consumer/").then((function(e){if(e.ok)return e})).then((function(e){if(e)return e.json()})).then((function(a){t=a?a.length+1:1;var n=e.state.state.slice(0,2).toUpperCase()+e.state.district.slice(0,2).toUpperCase()+e.state.doi.split("-")[0].slice(2)+e.state.doi.split("-")[1]+t.toString().lpad("0",4);e.setState({id:n})}))}},{key:"handleSubmit",value:function(e){this.toggleModal(),this.props.createConsumer({id:this.state.id,firstname:this.state.firstname,lastname:this.state.lastname,doi:this.state.doi,reading:this.state.reading,address:this.state.address,city:this.state.city,district:this.state.district,state:this.state.state,phone:this.state.phone}),e.preventDefault()}},{key:"getLocation",value:function(e){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var a=e.coords.latitude,n=e.coords.longitude,r="https://api.opencagedata.com/geocode/v1/json?key=76033ff8adfd4e0d9fc2434940fbebd0&q="+encodeURIComponent(a+","+n)+"&pretty=1&no_annotations=1",s=new XMLHttpRequest;s.open("GET",r,!0),s.onload=function(){if(200==s.status){var e=JSON.parse(s.responseText);return console.log("data: ",e),this.stateHandel(e.results[0].components.town,e.results[0].components.state_district,e.results[0].components.state,e.results[0].components.suburb),e}if(s.status<=500){console.log("unable to geocode! Response code: "+s.status);e=JSON.parse(s.responseText);console.log(e.status.message)}else console.log("server error")}.bind(t),s.onerror=function(){console.log("unable to connect to server")},s.send()})):alert("Geolocation is not supported by this browser.")}},{key:"getItemsAsync",value:function(e){var t=this;fetch(N+"consumer").then((function(e){if(e.ok)return e.json();alert("No consumer available")})).then((function(e){if(e.length){var a=e.map((function(e){return{value:e.firstname+"/"+e.id}}));t.setState({repos:a})}})),this.setState({key:e.split("/")[1]})}},{key:"render",value:function(){var e=this;return this.props.auth.isAuthenticated?this.props.auth.isLoading?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(S,null))):this.props.auth.errMess?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,this.props.auth.errMess))):this.props.auth.isAdmin?r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Admin Page"),r.a.createElement("div",{className:"row row-rows"},r.a.createElement("div",{className:"col-12 col-sm-4 my-2"},r.a.createElement(p.a,{color:"primary",outline:!0,onClick:this.toggleModal},"Create Consumer")),r.a.createElement("div",{className:"col-12 offset-sm-2 col-sm-4 my-2"},r.a.createElement(j.a,{data:this.state.repos,placeholder:"Search Consumer",multiple:!0,onChange:function(t){return e.getItemsAsync(t)},inputBoxFontSize:"100%",value:""}),r.a.createElement(w.b,{to:"editConsumer/".concat(this.state.key)},r.a.createElement(p.a,{className:"mt-1",outline:!0,type:"button"},"Search")))),r.a.createElement("div",{className:"row row-rows"},r.a.createElement("div",{className:"col-12 col-sm-4 my-2"},r.a.createElement(p.a,{color:"primary",outline:!0,onClick:this.toggleModalStaff},"Create Staff")),r.a.createElement("div",{className:"col-12 offset-sm-2 col-sm-4 my-2"},r.a.createElement(h.a,{type:"text",id:"cid",name:"cid",placeholder:"Consumer Id",value:this.state.id2,onChange:function(t){e.setState({id2:t.target.value})}}),r.a.createElement(w.b,{to:"/editConsumer/".concat(this.state.id2)},r.a.createElement(p.a,{className:"mt-1",outline:!0,type:"button"},"Edit Consumer")))),r.a.createElement("div",{className:"row row-rows"},r.a.createElement("div",{className:"col-12 col-sm-4 my-2"},r.a.createElement(w.b,{to:"/feedbacks"},r.a.createElement(p.a,{color:"primary",outline:!0,onClick:this.handleFeedback,type:"button"},"See Feedbacks"))),r.a.createElement("div",{className:"col-12 offset-sm-2 col-sm-4 my-2"},r.a.createElement(h.a,{placeholder:"Charge per reading",type:"number",name:"charge",id:"charge",value:this.state.charge,onChange:function(t){e.setState({charge:t.target.value})}}),r.a.createElement(p.a,{className:"mt-1",outline:!0,onClick:this.handleCharge,type:"button"},"Change Charge"))),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(g.a,{isOpen:this.state.isModalOpenStaff,toggle:this.toggleModalStaff},r.a.createElement(f.a,{toggle:this.toggleModalStaff},"Create Staff"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"firstname"},"First Name"),r.a.createElement(h.a,{type:"text",id:"firstname",name:"firstname",innerRef:function(t){return e.firstname=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"lastname"},"Last Name"),r.a.createElement(h.a,{type:"text",id:"lastname",name:"lastname",innerRef:function(t){return e.lastname=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"username"},"Username"),r.a.createElement(h.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"password"},"Password"),r.a.createElement(h.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(p.a,{onClick:this.handleSubmitStaff,type:"button",value:"submit",color:"primary"},"Create")))),r.a.createElement(g.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.a,{toggle:this.toggleModal},"Create Consumer"),r.a.createElement(E.a,null,r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"firstname"},"First Name"),r.a.createElement(h.a,{type:"text",id:"firstname",name:"firstname",value:this.state.firstname,onChange:function(t){e.setState({firstname:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"lastname"},"Last Name"),r.a.createElement(h.a,{type:"lastname",id:"lastname",name:"lastname",value:this.state.lastname,onChange:function(t){e.setState({lastname:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"doi"},"Date of Installation"),r.a.createElement(h.a,{type:"date",name:"doi",id:"doi",placeholder:"DOI",value:this.state.doi,onChange:function(t){e.setState({doi:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"reading"},"Reading"),r.a.createElement(h.a,{type:"number",name:"reading",id:"reading",placeholder:"Reading",value:this.state.reading,onChange:function(t){e.setState({reading:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"phone"},"Phone No."),r.a.createElement(h.a,{type:"string",name:"phone",id:"phone",placeholder:"Contact No.",value:this.state.phone,onChange:function(t){e.setState({phone:t.target.value})}})),r.a.createElement(p.a,{onClick:this.getLocation,type:"button",value:"submit",color:"info"},"Get Address"),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"address"},"Address"),r.a.createElement(h.a,{type:"text",name:"address",id:"address",placeholder:"Apartment, studio, or floor",value:this.state.address,onChange:function(t){e.setState({address:t.target.value})}})),r.a.createElement(k.a,{form:!0},r.a.createElement(O.a,{md:3},r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"city"},"City"),r.a.createElement(h.a,{type:"text",name:"city",id:"city",value:this.state.city,onChange:function(t){e.setState({city:t.target.value})}}))),r.a.createElement(O.a,{md:3},r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"district"},"District"),r.a.createElement(h.a,{type:"text",name:"district",id:"district",value:this.state.district,onChange:function(t){e.setState({district:t.target.value})}}))),r.a.createElement(O.a,{md:4},r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"state"},"State"),r.a.createElement(h.a,{type:"text",name:"state",id:"state",value:this.state.state,onChange:function(t){e.setState({state:t.target.value})}})))),r.a.createElement(p.a,{onClick:this.getId,type:"button",value:"submit",color:"info"},"Get ConsumerId"),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"state"},"Consumer Id"),r.a.createElement(h.a,{type:"text",name:"state",id:"state",value:this.state.id,onChange:function(t){e.setState({id:t.target.value})}})),r.a.createElement(p.a,{type:"submit",color:"primary"},"Create"))))):this.props.auth.isAdmin?void 0:r.a.createElement("div",null,r.a.createElement("h1",null,"Only For Admin")):r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row row-header"},r.a.createElement("div",{className:"col-12 col-sm-5"},r.a.createElement("h1",null,"Drop Welcomes You"),r.a.createElement("p",null,"Welcome to the best water service that provides pure and mineralized water in cheap rates.")),r.a.createElement("div",{className:"col-12 col-sm-5 offset-sm-2"},r.a.createElement("h3",null,"Consumer Login"),r.a.createElement(b.a,null,r.a.createElement(h.a,{type:"text",id:"id",name:"id",value:this.state.id3,onChange:function(t){e.setState({id3:t.target.value})}}),r.a.createElement(w.b,{to:"/consumers/".concat(this.state.id3)},r.a.createElement(p.a,{className:"mt-2",outline:!0,type:"submit"},"Submit"))))))),r.a.createElement(A,null))}}]),a}(n.Component),P=a(126),_=a(127),U=a(128),T=a(129),G=a(130),H=a(131),B=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isNavOpen:!1},n.toggleNav=n.toggleNav.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{dark:!0,color:"dark",expand:"md"},r.a.createElement("div",{className:"container"},r.a.createElement(_.a,{onClick:this.toggleNav}),r.a.createElement(U.a,{className:"mr-auto",href:"/"},r.a.createElement("strong",null,"DROP")),r.a.createElement(T.a,{isOpen:this.state.isNavOpen,navbar:!0},r.a.createElement(G.a,{navbar:!0},r.a.createElement(H.a,null,r.a.createElement(w.c,{className:"nav-link mx-2",to:"/home"},r.a.createElement("span",{className:"fa fa-home fa-lg"})," Home")),r.a.createElement(H.a,null,r.a.createElement(w.c,{className:"nav-link mx-1",to:"/aboutus"},r.a.createElement("span",{className:"fa fa-info fa-lg"})," About Us")),r.a.createElement(H.a,null,r.a.createElement(w.c,{className:"nav-link mx-2",to:"/service"},r.a.createElement("span",{className:"fa fa-briefcase fa-lg"})," Services")),r.a.createElement(H.a,null,r.a.createElement(w.c,{className:"nav-link mx-1",to:"/liscence"},r.a.createElement("span",{className:"fa fa-book fa-lg"})," Liscence")),"&nsbp;&nsbp;&nsbp;&nsbp;&nsbp;&nsbp;&nsbp;&nsbp;&nsbp;",r.a.createElement("div",{class:"navbar-nav ml-6"},r.a.createElement("a",{"data-toggle":"tooltip",title:"Facebook",href:"#",class:"nav-item nav-link"},r.a.createElement("i",{class:"fa fa-lg fa-facebook"})),r.a.createElement("a",{"data-toggle":"tooltip",title:"Twitter",href:"#",class:"nav-item nav-link"},r.a.createElement("i",{class:"fa fa-lg fa-twitter"})),r.a.createElement("a",{"data-toggle":"tooltip",title:"Instagram",href:"#",class:"nav-item nav-link"},r.a.createElement("i",{class:"fa fa-lg fa-instagram"})),r.a.createElement("a",{"data-toggle":"tooltip",title:"LinkedIn",href:"#",class:"nav-item nav-link"},r.a.createElement("i",{class:"fa fa-lg fa-linkedin"}))))))))}}]),a}(n.Component);var z=function(e){return r.a.createElement("div",{id:"foot",className:"footer bgclr"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-4 offset-1 col-sm-2"},r.a.createElement("h5",null,"Links"),r.a.createElement("ul",{className:"list-unstyled"},r.a.createElement("li",null,r.a.createElement(w.b,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(w.b,{to:"/aboutus"},"About Us")),r.a.createElement("li",null,r.a.createElement(w.b,{to:"/contactus#foot"},"Contact Us")))),r.a.createElement("div",{className:"col-7 col-sm-5"},r.a.createElement("h5",null,"Our Address"),r.a.createElement("address",null,"Shiv Puri Colony",r.a.createElement("br",null),"Near Sanskar Coaching Centre",r.a.createElement("br",null),"Chas, Bokaro, Jharkhand",r.a.createElement("br",null),r.a.createElement("i",{className:"fa fa-phone fa-lg"}),": +917979784087",r.a.createElement("br",null),r.a.createElement("i",{className:"fa fa-envelope fa-lg"}),": ",r.a.createElement("a",{href:"mailto:drop@gmail.com"},"drop@gmail.com"))),r.a.createElement("div",{className:"col-12 row col-sm-4 justify-content-center align-items-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("a",{className:"btn btn-social-icon btn-google",href:"http://google.com/+"},r.a.createElement("i",{className:"fa fa-google-plus"})),r.a.createElement("a",{className:"btn btn-social-icon btn-facebook",href:"http://www.facebook.com/profile.php?id="},r.a.createElement("i",{className:"fa fa-facebook"})),r.a.createElement("a",{className:"btn btn-social-icon btn-linkedin",href:"http://www.linkedin.com/in/"},r.a.createElement("i",{className:"fa fa-linkedin"})),r.a.createElement("a",{className:"btn btn-social-icon btn-twitter",href:"http://twitter.com/"},r.a.createElement("i",{className:"fa fa-twitter"})),r.a.createElement("a",{className:"btn btn-social-icon btn-google",href:"http://youtube.com/"},r.a.createElement("i",{className:"fa fa-youtube"})),r.a.createElement("a",{className:"btn btn-social-icon",href:"mailto:"},r.a.createElement("i",{className:"fa fa-envelope-o"})))),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",null,"Designed by ",r.a.createElement("a",{href:"https://linkedin.com/in/mithilesh-kumar-9946b5179"},"Mithilesh")))),r.a.createElement("div",{class:"row justify-content-center align-item-center text-center"},r.a.createElement("a",{"data-toggle":"tooltip",title:"Facebook",href:"https://www.facebook.com/profile.php?id=100014646164543",class:"nav-item nav-link"},r.a.createElement("i",{class:"fa fa-lg fa-facebook"})),r.a.createElement("a",{"data-toggle":"tooltip",title:"Instagram",href:"https://www.instagram.com/sittu.mkd/",class:"nav-item nav-link"},r.a.createElement("i",{class:"fa fa-lg fa-instagram"})),r.a.createElement("a",{"data-toggle":"tooltip",title:"LinkedIn",href:"https://linkedin.com/in/mithilesh-kumar-9946b5179",class:"nav-item nav-link"},r.a.createElement("i",{class:"fa fa-lg fa-linkedin"})))),r.a.createElement("br",null),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",null,"\xa9 Copyright 2018 Drop"))))},J=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isModalOpen:!1},n.toggleModal=n.toggleModal.bind(Object(d.a)(n)),n.handleLogin=n.handleLogin.bind(Object(d.a)(n)),n.handleLogout=n.handleLogout.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"handleLogin",value:function(e){console.log("handleLogin"),this.toggleModal(),this.props.loginUser({username:this.username.value,password:this.password.value}),e.preventDefault()}},{key:"handleLogout",value:function(){this.props.logoutUser()}},{key:"render",value:function(){var e=this;return this.props.auth.isAuthenticated?r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(p.a,{outline:!0,onClick:this.handleLogout},r.a.createElement("span",{className:"fa fa-sign-in fa-lg"})," Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(p.a,{outline:!0,onClick:this.toggleModal},r.a.createElement("span",{className:"fa fa-sign-in fa-lg"})," Admin Login")),r.a.createElement(g.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.a,{toggle:this.toggleModal},"Admin Login"),r.a.createElement(E.a,null,r.a.createElement(b.a,{onSubmit:this.handleLogin},r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"username"},"Username"),r.a.createElement(h.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"password"},"Password"),r.a.createElement(h.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(p.a,{type:"submit",value:"submit",color:"primary"},"Login")))))}}]),a}(n.Component),K=function(e){Object(i.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"about"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"image round fit col-10 col-sm-4 img-fluid"},r.a.createElement("img",{src:a(90),class:"rounded-circle col-12 my-4",width:"300",height:"236",alt:"founder"})),r.a.createElement("div",{className:"col-10 col-sm-8 align-self-center"},r.a.createElement("h3",null,r.a.createElement("strong",null,"Lucky Sharma"),r.a.createElement("blockquote",{className:"blockquote"},"Founder")," "),r.a.createElement("p",{className:"para"},r.a.createElement("em",null,r.a.createElement("strong",null,"Drop")," gives not only pure and mineralized water but at much lesser rate than that of market. I believe on customer satisfaction so any issues caused will be solved within hours."))))))}}]),n}(n.Component),W=a(132),Y=a(135),q=a(136),Q=a(133),V=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isDropdownOpen:!1,fieldname:"",update:!1},n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.handleDropdown=n.handleDropdown.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"handleDropdown",value:function(){this.setState({isDropdownOpen:!this.state.isDropdownOpen})}},{key:"handleChange",value:function(e){this.setState({fieldname:e})}},{key:"handleSubmit",value:function(e){this.setState({update:!0}),console.log("HandelSubmit",this.state.fieldname);var t="Bearer "+localStorage.getItem("token"),a=this.state.fieldname,n=this.fieldval.value,r={id:this.props.id,field:a,val:n};return fetch(N+"consumer/edit/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(r),credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,console.log("err1",t),t}),(function(e){throw console.log("err",e),e})).then((function(e){return e.json()})).then((function(e){alert("Data Changed Successfully!")})).catch((function(e){return alert("Failed to edit consumer: ",e)}))}},{key:"shouldComponentUpdate",value:function(){return this.state.update}},{key:"render",value:function(){var e=this;return this.props.isLoading?r.a.createElement(S,null):this.props.errMess?r.a.createElement("h4",null,this.props.errMess):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"align-item-center"},r.a.createElement("h1",null,"User Details"),r.a.createElement("h3",null,"Consumer Id :  ",this.props.consumer.id),r.a.createElement("h3",null,"First Name :  ",this.props.consumer.firstname),r.a.createElement("h3",null,"Last Name : ",this.props.consumer.lastname),r.a.createElement("h3",null,"Reading :  ",this.props.consumer.reading),r.a.createElement("h3",null,"Date of Installation :  ",this.props.consumer.doi),r.a.createElement("h3",null,"Phone No. :  ",this.props.consumer.phone),r.a.createElement("h3",null,"Address :  ",this.props.consumer.address," "),r.a.createElement("h3",null,"City :  ",this.props.consumer.city),r.a.createElement("h3",null,"District :  ",this.props.consumer.district),r.a.createElement("h3",null,"State :  ",this.props.consumer.state),r.a.createElement("br",null)),r.a.createElement(b.a,{className:"mt-3"},r.a.createElement(k.a,null,r.a.createElement(O.a,{className:"offset-md-3",md:3},r.a.createElement(W.a,{isOpen:this.state.isDropdownOpen,toggle:this.handleDropdown},r.a.createElement(Y.a,{caret:!0},"Field Name"),r.a.createElement(q.a,{id:"dropdown"},r.a.createElement(Q.a,{onClick:function(){return e.handleChange("firstname")},value:"firstname"},"First Name"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("lastname")},value:"lastname"},"Last Name"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("reading")},value:"reading"},"Reading"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("phone")},value:"phone"},"Phone"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("doi")},value:"doi"},"Date Of Installation"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("address")},value:"address"},"Address"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("city")},value:"city"},"City"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("district")},value:"district"},"District"),r.a.createElement(Q.a,{onClick:function(){return e.handleChange("state")},value:"state"}," State")))),r.a.createElement(O.a,{md:3},r.a.createElement(v.a,null,r.a.createElement(h.a,{type:"text",id:"fieldval",name:"fieldval",placeholder:"Field Value",innerRef:function(t){return e.fieldval=t}}))),r.a.createElement(O.a,{md:3},r.a.createElement(w.b,{to:"/editConsumer/".concat(this.props.id)},r.a.createElement(p.a,{onClick:this.handleSubmit,type:"button",color:"primary"},"Change"))))),r.a.createElement("br",null)," ",r.a.createElement("br",null))}}]),a}(n.Component),X=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.payments,t=e;return console.log("in",t),t.reverse(),console.log("in2",t),console.log("props",this.props),this.props.isLoading?(console.log("loading"),r.a.createElement(S,null)):this.props.errMess?(console.log("error"),r.a.createElement("h4",null,this.props.errMess)):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Welcome ",this.props.consumer.firstname)),r.a.createElement("h2",null,r.a.createElement("u",null,"Consumer Id: ",this.props.id," "))," ",r.a.createElement("br",null),r.a.createElement("h3",null,"Payments")," ",r.a.createElement("br",null),r.a.createElement("h4",null,"Total Dues : ",this.props.dues),r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped  table-responsive"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Paid"),r.a.createElement("th",null,"Open Reading"),r.a.createElement("th",null,"Close Reading"),r.a.createElement("th",null,"Method"),r.a.createElement("th",null,"Receiver"),r.a.createElement("th",null,"Date(yyyy/mm/dd)"),r.a.createElement("th",null,"Image"))),r.a.createElement("tbody",null,e.map((function(e){return e.image?r.a.createElement("tr",{key:e.pid},r.a.createElement("td",null,e.paid),r.a.createElement("td",null,e.openReading),r.a.createElement("td",null,e.closeReading),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.receiver),r.a.createElement("td",null,e.date.substring(0,10)),r.a.createElement("td",null,r.a.createElement("a",{style:{display:"table-cell"},href:"localhost:3000"+e.image,target:"_blank",rel:"noopener noreferrer"},"Image Link"))):r.a.createElement("tr",{key:e.pid},r.a.createElement("td",null,e.paid),r.a.createElement("td",null,e.openReading),r.a.createElement("td",null,e.closeReading),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.receiver),r.a.createElement("td",null,e.date.substring(0,10)),r.a.createElement("td",null))}))))))}}]),a}(n.Component),$=a(35),Z=a.n($),ee=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isModalOpen:!1,isModalOpenPayment:!0,isModalOpenFeedback:!1,picturesFeedback:[],pictures:[],paid:null,openReading:null,closeReading:null,method:"Cash",charge:null,prevCharge:1},n.toggleModal=n.toggleModal.bind(Object(d.a)(n)),n.handleLogin=n.handleLogin.bind(Object(d.a)(n)),n.toggleModalPayment=n.toggleModalPayment.bind(Object(d.a)(n)),n.handlePayment=n.handlePayment.bind(Object(d.a)(n)),n.onDrop=n.onDrop.bind(Object(d.a)(n)),n.onDropFeedback=n.onDropFeedback.bind(Object(d.a)(n)),n.paymentHistory=n.paymentHistory.bind(Object(d.a)(n)),n.toggleModalFeedback=n.toggleModalFeedback.bind(Object(d.a)(n)),n.handleFeedback=n.handleFeedback.bind(Object(d.a)(n)),n.returnCharge=n.returnCharge.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"toggleModalFeedback",value:function(){this.setState({isModalOpenFeedback:!this.state.isModalOpenFeedback})}},{key:"componentDidMount",value:function(){console.log("didmount"),this.state.prevCharge!==this.state.charge&&(this.state.prevCharge=this.state.charge,this.returnCharge())}},{key:"returnCharge",value:function(){var e=this;fetch(N+"values/").then((function(e){if(e.ok)return e})).then((function(e){if(e)return e.json()})).then((function(t){if(t.status){var a=t.res.charge;e.setState({charge:a})}}))}},{key:"onDropFeedback",value:function(e){this.setState({picturesFeedback:this.state.picturesFeedback.concat(e)})}},{key:"handleFeedback",value:function(e){var t=this;console.log("state",this.state),fetch(N+"feedback").then((function(e){if(e.ok)return e;console.log("err1");var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(e.status)var a=e.length+1;else a=1;if(t.state.picturesFeedback.length)var n={cid:t.props.id,message:t.message.value,image:"/assets/images/feedback/"+t.props.id+"-"+a+"."+t.state.picturesFeedback[0].type.split("/")[1]};else n={cid:t.props.id,message:t.message.value};fetch(N+"feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(e.ok)return e;console.log("err1");var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(e.status&&(alert(e.mes),t.state.picturesFeedback.length)){var n=new FormData;n.append("imageFile",t.state.picturesFeedback[0]),console.log("formdata",n);var r={method:"POST",body:n};fetch(N+"uploadFeedback/".concat(t.props.id,"/").concat(a),r).then((function(e){e.ok&&alert("Feedback Photo added Successfully!")})).catch((function(e){return alert("Failed to add photo: ",e)}))}}),(function(e){return alert(e)})).catch((function(e){return alert("Failed to add Payment data: ",e)}))})),e.preventDefault()}},{key:"paymentHistory",value:function(){this.props.fetchPayments()}},{key:"onDrop",value:function(e){this.setState({pictures:this.state.pictures.concat(e)})}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"toggleModalPayment",value:function(){this.setState({isModalOpenPayment:!this.state.isModalOpenPayment}),this.state.isModalOpenPayment||localStorage.setItem("clicked",!1)}},{key:"handlePayment",value:function(e){var t,a=this;console.log("state",this.state);var n,r=this.props.id;fetch(N+"payment/".concat(r,"/pid")).then((function(e){if(e.ok)return e})).then((function(e){if(e)return e.json()})).then((function(e){n=e.pid,fetch(N+"values/").then((function(e){if(e.ok)return e})).then((function(e){if(e)return e.json()})).then((function(e){if(e.status){if(t=e.res.charge,console.log("met",a.state),a.state.pictures.length)if(a.props.auth.isAdmin)var s={paid:a.state.paid,openReading:a.state.openReading,closeReading:a.state.closeReading,method:a.state.method,charge:t,image:"/assets/images/payments/"+r+"-"+n.toString()+"."+a.state.pictures[0].type.split("/")[1]};else s={paid:a.state.paid,closeReading:a.state.closeReading,method:a.state.method,charge:t,image:"/assets/images/payments/"+r+"-"+n.toString()+"."+a.state.pictures[0].type.split("/")[1]};else if(a.props.auth.isAdmin)s={paid:a.state.paid,openReading:a.state.openReading,closeReading:a.state.closeReading,method:a.state.method,charge:t};else s={paid:a.state.paid,closeReading:a.state.closeReading,method:a.state.method,charge:t};console.log("data",s);var l="Bearer "+localStorage.getItem("token");return fetch(N+"payment/".concat(r),{method:"POST",headers:{"Content-Type":"application/json",Authorization:l},body:JSON.stringify(s),credentials:"same-origin"}).then((function(e){if(e.ok)return console.log("resp",e),e;console.log("err1");var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(console.log("resp1",e),e.status)if(alert(e.msg),"Online"===a.state.method){var t=new FormData,s="Bearer "+localStorage.getItem("token");t.append("imageFile",a.state.pictures[0]),console.log("formdata",t);var l={method:"POST",body:t,headers:{Authorization:s},credentials:"same-origin"};fetch(N+"upload/".concat(r,"/").concat(n),l).then((function(e){e.ok&&(alert("Payment Photo added Successfully!"),a.props.logoutUser())})).catch((function(e){alert("Failed to add photo: ",e),a.props.logoutUser()}))}else a.props.logoutUser()})).catch((function(e){alert("Failed to add Payment data: ",e),a.props.logoutUser()}))}})).catch((function(e){return alert(e)}))})).catch((function(e){return alert("Error:",e)})),e.preventDefault(),localStorage.setItem("clicked",!1)}},{key:"handleLogin",value:function(e){console.log("handleLogin"),this.toggleModal(),this.props.loginUser({username:this.username.value,password:this.password.value}),localStorage.setItem("clicked",!0),e.preventDefault()}},{key:"render",value:function(){var e=this;return console.log("state1",this.state),console.log("renders"),this.props.auth.isAuthenticated&&localStorage.getItem("clicked")?this.props.auth.isAdmin?r.a.createElement("div",null,r.a.createElement(g.a,{isOpen:this.state.isModalOpenPayment,toggle:this.toggleModalPayment},r.a.createElement(f.a,{toggle:this.toggleModalPayment},"Payment Details"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"paid"},"Paid Amount"),r.a.createElement(h.a,{type:"Number",id:"paid",name:"paid",value:this.state.paid,onChange:function(t){e.setState({paid:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"openReading"},"Open Reading"),r.a.createElement(h.a,{type:"Number",id:"openReading",name:"openReading",value:this.state.openReading,onChange:function(t){e.setState({openReading:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"closeReading"},"Close Reading"),r.a.createElement(h.a,{type:"Number",id:"closeReading",name:"closeReading",value:this.state.closeReading,onChange:function(t){e.setState({closeReading:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,null,"Payment Method")),r.a.createElement(v.a,null,r.a.createElement("select",{class:"browser-default custom-select",name:"method",id:"method",onChange:function(t){e.setState({method:t.target.value})}},r.a.createElement("option",{value:"Cash"},"Cash"),r.a.createElement("option",{value:"Online"},"Online"))),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"file"},"Upload image of payment(in Online payment only)"),r.a.createElement(Z.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".gif",".png",".gif"],maxFileSize:5242880,withPreview:!0,withLabel:!0})),r.a.createElement(p.a,{onClick:this.handlePayment,type:"button",value:"submit",color:"primary"},"Add Payment"))))):r.a.createElement("div",null,r.a.createElement(g.a,{isOpen:this.state.isModalOpenPayment,toggle:this.toggleModalPayment},r.a.createElement(f.a,{toggle:this.toggleModalPayment},"Payment Details"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"paid"},"Paid Amount"),r.a.createElement(h.a,{type:"Number",id:"paid",name:"paid",value:this.state.paid,onChange:function(t){e.setState({paid:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"closeReading"},"Reading"),r.a.createElement(h.a,{type:"Number",id:"closeReading",name:"closeReading",value:this.state.closeReading,onChange:function(t){e.setState({closeReading:t.target.value})}})),r.a.createElement(v.a,null,r.a.createElement(y.a,null,"Payment Method")),r.a.createElement(v.a,null,r.a.createElement("select",{class:"browser-default custom-select",name:"method",id:"method",onChange:function(t){e.setState({method:t.target.value})}},r.a.createElement("option",{value:"Cash"},"Cash"),r.a.createElement("option",{value:"Online"},"Online"))),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"file"},"Upload image of payment(in Online payment only)"),r.a.createElement(Z.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".gif",".png",".gif"],maxFileSize:5242880,withPreview:!0,withLabel:!0})),r.a.createElement(p.a,{onClick:this.handlePayment,type:"button",value:"submit",color:"primary"},"Add Payment"))))):this.props.closeReading?(localStorage.setItem("clicked",!1),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Welcome ",this.props.consumer.firstname)),r.a.createElement("h2",null,r.a.createElement("u",null,"Consumer Details:"))," ",r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("em",null,r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Consumer Id : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.id)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Name : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.firstname+" "+this.props.consumer.lastname)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Phone : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.phone)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Address : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.address+", "+this.props.consumer.city+", "+this.props.consumer.district+", "+this.props.consumer.state)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Date of Installation(yyyy/mm/dd) : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.doi)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Charge per Reading : ")," ",r.a.createElement("span",{className:"val"},this.state.charge)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Open Reading : ")," ",r.a.createElement("span",{className:"val"},this.props.closeReading)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Total Dues : ")," ",r.a.createElement("span",{className:"val"},this.props.dues)))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.b,{to:"/payments/".concat(this.props.id)},r.a.createElement(p.a,{type:"button",onClick:this.props.fetchPayments},"Payment History")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,null,r.a.createElement("strong",null,"Login For Payment")," ",r.a.createElement("em",null,"(only via staff members)  ")," ")," \xa0",r.a.createElement(p.a,{className:"btn btm-lg",type:"button",onClick:this.toggleModal},"Login"),r.a.createElement(g.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.a,{toggle:this.toggleModal},"Login"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"username"},"Username"),r.a.createElement(h.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"password"},"Password"),r.a.createElement(h.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(p.a,{onClick:this.handleLogin,type:"button",value:"submit",color:"primary"},"Login")))),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(p.a,{type:"button",onClick:this.toggleModalFeedback},"Send Feedback"),r.a.createElement(g.a,{isOpen:this.state.isModalOpenFeedback,toggle:this.toggleModalFeedback},r.a.createElement(f.a,{toggle:this.toggleModalFeedback},"Feedback"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"message"},"Feedback"),r.a.createElement(h.a,{type:"textarea",className:"form-control z-depth-1",id:"message",name:"message",rows:"3",placeholder:"Feedback or Complain",innerRef:function(t){return e.message=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"file"},"Upload image of payment(in Online payment only)"),r.a.createElement(Z.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDropFeedback,imgExtension:[".jpg",".jpeg",".gif",".png",".gif"],maxFileSize:5242880,withPreview:!0,withLabel:!0})),r.a.createElement(p.a,{onClick:this.handleFeedback,type:"button",value:"submit",color:"primary"},"Submit")))))):(localStorage.setItem("clicked",!1),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Welcome ",this.props.consumer.firstname)),r.a.createElement("h2",null,r.a.createElement("u",null,"Consumer Details:"))," ",r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("em",null,r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Consumer Id : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.id)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Name : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.firstname+" "+this.props.consumer.lastname)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Phone : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.phone)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Address : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.address+", "+this.props.consumer.city+", "+this.props.consumer.district+", "+this.props.consumer.state)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Date of Installation(yyyy/mm/dd) : ")," ",r.a.createElement("span",{className:"val"},this.props.consumer.doi)),r.a.createElement("h4",null,r.a.createElement("span",{className:"fld"},"Charge per Reading : ")," ",r.a.createElement("span",{className:"val"},this.state.charge)))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,null,r.a.createElement("strong",null,"Login For Payment "),"(only via staff members) "),r.a.createElement(p.a,{type:"button",onClick:this.toggleModal},"Login"),r.a.createElement(g.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(f.a,{toggle:this.toggleModal},"Login"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"username"},"Username"),r.a.createElement(h.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"password"},"Password"),r.a.createElement(h.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(p.a,{onClick:this.handleLogin,type:"button",value:"submit",color:"primary"},"Login")))),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(p.a,{type:"button",onClick:this.toggleModalFeedback},"Send Feedback"),r.a.createElement(g.a,{isOpen:this.state.isModalOpenFeedback,toggle:this.toggleModalFeedback},r.a.createElement(f.a,{toggle:this.toggleModalFeedback},"Feedback"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"message"},"Feedback"),r.a.createElement(h.a,{type:"textarea",className:"form-control z-depth-1",id:"message",name:"message",rows:"3",placeholder:"Feedback or Complain",innerRef:function(t){return e.message=t}})),r.a.createElement(v.a,null,r.a.createElement(y.a,{htmlFor:"file"},"Upload image of payment(in Online payment only)"),r.a.createElement(Z.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDropFeedback,imgExtension:[".jpg",".jpeg",".gif",".png",".gif"],maxFileSize:5242880,withPreview:!0,withLabel:!0})),r.a.createElement(p.a,{onClick:this.handleFeedback,type:"button",value:"submit",color:"primary"},"Submit"))))))}}]),a}(n.Component),te=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){if(this.props.isLoading)return console.log("loading"),r.a.createElement(S,null);if(this.props.errMess)return console.log("error"),r.a.createElement("h4",null,this.props.errMess);var e=this.props.feedback;return console.log("prod",e),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Consumer Feedbacks")),r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Consumer Id"),r.a.createElement("th",null,"Message"),r.a.createElement("th",null,"Date(yyyy/mm/dd)"),r.a.createElement("th",null,"Image"))),r.a.createElement("tbody",null,e.map((function(e){return e.image?r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.cid),r.a.createElement("td",null,e.message),r.a.createElement("td",null,e.date.substring(0,10)),r.a.createElement("td",null,r.a.createElement("a",{style:{display:"table-cell"},href:"localhost:3000"+e.image,target:"_blank",rel:"noopener noreferrer"},"Image Link"))):r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.cid),r.a.createElement("td",null,e.message),r.a.createElement("td",null,e.date.substring(0,10)),r.a.createElement("td",null))}))))))}}]),a}(n.Component),ae=a(36),ne=function(e){return{type:"ADD_CONSUMER",payload:e}},re=function(){return{type:"CONSUMERS_LOADING"}},se=function(e){return{type:"CONSUMERS_FAILED",payload:e}},le=function(e){return{type:"ADD_CONSUMERS",payload:e}},oe=function(){return{type:"PAYMENTS_LOADING"}},ce=function(e){return{type:"PAYMENTS_FAILED",payload:e}},ie=function(e){return{type:"ADD_PAYMENTS",payload:e}},me=function(){return{type:"FEEDBACKS_LOADING"}},ue=function(e){return{type:"FEEDBACKS_FAILED",payload:e}},de=function(e){return{type:"ADD_FEEDBACKS",payload:e}},pe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchFeedbacks(),this.props.fetchConsumers(),this.props.fetchPayments()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(B,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:function(){return r.a.createElement(R,{auth:e.props.auth,createConsumer:e.props.createConsumer,fetchFeedbacks:e.props.fetchFeedbacks})}}),r.a.createElement(u.a,{path:"/home",component:function(){return r.a.createElement(R,{auth:e.props.auth,fetchFeedbacks:e.props.fetchFeedbacks,createConsumer:e.props.createConsumer})}}),r.a.createElement(u.a,{path:"/aboutus",component:function(){return r.a.createElement(K,null)}}),r.a.createElement(u.a,{path:"/editConsumer/:cid",component:function(t){var a=t.match;return console.log("cons",e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0]),void 0===e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0]?r.a.createElement("div",{className:"align-items-center"},r.a.createElement("h1",null,"Error: Invalid Consumer Id")):r.a.createElement(V,{consumer:e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0],isLoading:e.props.consumers.isLoading,errMess:e.props.consumers.errMess,id:a.params.cid,fetchConsumers:e.props.fetchConsumers})}}),r.a.createElement(u.a,{path:"/consumers/:cid",component:function(t){var a=t.match;return void 0===e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0]?r.a.createElement("div",{className:"align-items-center"},r.a.createElement("h1",null,"Error: Invalid Consumer Id")):e.props.payments.payments.length?e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0]?r.a.createElement(ee,{consumer:e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0],isLoading:e.props.consumers.isLoading,errMess:e.props.consumers.errMess,id:a.params.cid,auth:e.props.auth,loginUser:e.props.loginUser,logoutUser:e.props.logoutUser,fetchPayments:e.props.fetchPayments,dues:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].dues,closeReading:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].payments.reverse()[0].closeReading}):r.a.createElement(ee,{consumer:e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0],isLoading:e.props.consumers.isLoading,errMess:e.props.consumers.errMess,id:a.params.cid,auth:e.props.auth,loginUser:e.props.loginUser,logoutUser:e.props.logoutUser,fetchPayments:e.props.fetchPayments}):e.props.payments.isLoading?r.a.createElement(S,null):e.props.payments.errMess?r.a.createElement("h3",null,e.props.errMess):e.props.payments.payments.length?r.a.createElement(ee,{consumer:e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0],isLoading:e.props.consumers.isLoading,errMess:e.props.consumers.errMess,id:a.params.cid,auth:e.props.auth,loginUser:e.props.loginUser,logoutUser:e.props.logoutUser,fetchPayments:e.props.fetchPayments,dues:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].dues,closeReading:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].payments.reverse()[0].closeReading}):r.a.createElement(ee,{consumer:e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0],isLoading:e.props.consumers.isLoading,errMess:e.props.consumers.errMess,id:a.params.cid,auth:e.props.auth,loginUser:e.props.loginUser,logoutUser:e.props.logoutUser,fetchPayments:e.props.fetchPayments})}}),r.a.createElement(u.a,{path:"/payments/:cid",component:function(t){var a=t.match;return e.props.payments.payments.length?r.a.createElement(X,{payments:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].payments,dues:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].dues,isLoading:e.props.payments.isLoading,errMess:e.props.payments.errMess,id:a.params.cid,consumer:e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0]}):e.props.payments.isLoading?r.a.createElement(S,null):e.props.payments.errMess?r.a.createElement("h3",null,e.props.errMess):r.a.createElement(X,{payments:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].payments,dues:e.props.payments.payments.filter((function(e){return e.cid===a.params.cid}))[0].dues,isLoading:e.props.payments.isLoading,errMess:e.props.payments.errMess,id:a.params.cid,consumer:e.props.consumers.consumers.filter((function(e){return e.id===a.params.cid}))[0]})}}),r.a.createElement(u.a,{path:"/feedbacks",component:function(){return console.log("feed",e.props.feedbacks.feedbacks),e.props.feedbacks.feedbacks.length?r.a.createElement(te,{feedback:e.props.feedbacks.feedbacks,isLoading:e.props.feedbacks.isLoading,errMess:e.props.feedbacks.errMess}):r.a.createElement("h1",null,"No Feedbacks")}})),r.a.createElement(z,null),r.a.createElement(J,{auth:this.props.auth,loginUser:this.props.loginUser,logoutUser:this.props.logoutUser}))}}]),a}(n.Component),he=Object(u.f)(Object(ae.b)((function(e){return{auth:e.auth,consumers:e.consumers,payments:e.payments,feedbacks:e.feedbacks}}),(function(e){return{loginUser:function(t){return e(function(e){return function(t){return t(function(e){return{type:"LOGIN_REQUEST",creds:e}}(e)),fetch(N+"users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;alert("Incorrect Username or Password");var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(a){if(!a.success){var n=new Error("Error "+a.status);throw n.response=a,n}localStorage.setItem("token",a.token),localStorage.setItem("creds",JSON.stringify(e)),localStorage.setItem("admin",a.admin),console.log("admin",localStorage.getItem("admin")),t(function(e){return e.admin?{type:"LOGIN_ADMIN",token:e.token}:{type:"LOGIN_STAFF",token:e.token}}(a))})).catch((function(e){return t({type:"LOGIN_FAILURE",message:e.message})}))}}(t))},logoutUser:function(){return e((function(e){e({type:"LOGOUT_REQUEST"}),localStorage.removeItem("token"),localStorage.removeItem("creds"),localStorage.removeItem("admin"),e({type:"LOGOUT_SUCCESS"})}))},createConsumer:function(t){return e(function(e){return function(t){var a="Bearer "+localStorage.getItem("token");return console.log("dat-",JSON.stringify(e)),fetch(N+"consumer/create/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify(e),credentials:"same-origin"}).then((function(e){if(e.ok)return e;console.log("err1");var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(e.status)return alert(e.msg),t(ne(e.res))})).catch((function(e){return alert("Failed to create consumer: ",e)}))}}(t))},fetchConsumers:function(){e((function(e){return e(re(!0)),fetch(N+"consumer").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return console.log("items : ",t),e(le(t))})).catch((function(t){return e(se(t.message))}))}))},fetchPayments:function(){e((function(e){return e(oe(!0)),fetch(N+"payment/payments").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(ie(t))})).catch((function(t){return e(ce(t.message))}))}))},fetchFeedbacks:function(){e((function(e){return e(me(!0)),fetch(N+"feedback").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(de(t))})).catch((function(t){return e(ue(t.message))}))}))}}}))(pe)),ge=(a(108),a(30)),fe=a(9),Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAdmin:"true"===localStorage.getItem("admin"),isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("creds")?JSON.parse(localStorage.getItem("creds")):null,errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!0,isAuthenticated:!1,isAdmin:!1,user:t.creds});case"LOGIN_STAFF":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,isAuthenticated:!0,isAdmin:!1,errMess:"",token:t.token});case"LOGIN_ADMIN":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,isAuthenticated:!0,isAdmin:!0,errMess:"",token:t.token});case"LOGIN_FAILURE":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,isAuthenticated:!1,isAdmin:!1,errMess:t.message});case"LOGOUT_REQUEST":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!0,isAuthenticated:!0});case"LOGOUT_SUCCESS":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,isAuthenticated:!1,isAdmin:!1,token:"",user:null});default:return e}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,consumers:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CONSUMERS":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,errMess:null,consumers:t.payload});case"CONSUMERS_LOADING":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!0,errMess:null,consumers:[]});case"CONSUMERS_FAILED":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,errMess:t.payload,consumers:[]});case"ADD_CONSUMER":var a=t.payload;return Object(fe.a)(Object(fe.a)({},e),{},{consumers:e.consumers.concat(a)});default:return e}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,payments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PAYMENTS":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,errMess:null,payments:t.payload});case"CONSUMERS_LOADING":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!0,errMess:null,payments:[]});case"CONSUMERS_FAILED":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,errMess:t.payload,payments:[]});default:return e}},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,errMess:null,feedbacks:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FEEDBACKS":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,errMess:null,feedbacks:t.payload});case"FEEDBACKS_LOADING":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!0,errMess:null,feedbacks:[]});case"FEEDBACKS_FAILED":return Object(fe.a)(Object(fe.a)({},e),{},{isLoading:!1,errMess:t.payload,feedbacks:[]});default:return e}},ke=a(69),Oe=a(70),Ce=a.n(Oe),Se=Object(ge.d)(Object(ge.c)({auth:Ee,consumers:be,payments:ve,feedbacks:ye}),Object(ge.a)(ke.a,Ce.a)),Ne=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(ae.a,{store:Se},r.a.createElement(w.a,null,r.a.createElement("div",null,r.a.createElement(he,null))))}}]),a}(n.Component);a(109),a(110),a(111),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a(112)},90:function(e,t,a){e.exports=a.p+"static/media/ceo.9af62b1d.jpg"}},[[73,1,2]]]);
//# sourceMappingURL=main.a6655746.chunk.js.map